
## 前端浏览器渲染原理

## OSI 七层模型
将复杂的逻辑分成多个小功能来处理，简单化，维护方便
- 物理层
    网线 光纤来传递数据，如何表现0跟1，高低电平... 0跟1，双绞线 - 主要关心如何传输信号
- 数据链路层【增加mac地址，数据帧】
    两个设备之间的传递 建立逻辑链接... 数据帧，mac地址 - 主要关心两个设备之间的传递数据
- 网络层【增加IP头，段】
    寻址... ip地址，路由器，寻址操作（通过ip地址找到对应的mac地址） - 主要关心寻址
- 传输层【增加TCP头，包】
    网络层不可靠，数据丢包... 用tcp，保证数据传输的完整性 - 只要提供安全及数据完整性保障
- 会话层：建立和管理会话
- 表示层：数据的表示形式，安全性，压缩
- 应用层：用户最终访问的接口，如浏览器，app等

## TCP/IP 五层模型
### 什么是协议
- 数据链路层/物理层：物理设备
- 网络层：IP-寻址通过路由器查找，将消息发送给对方路由器，通过ARP协议发送自己的mac地址
         ARP-从ip地址获取mac地址
- 传输层：TCP-传输控制协议，UDP
- 应用层：HTTP-超文本传输协议，DNS-域名解析

### TCP
1. TCP
- 可靠，面向链接，传输效率低
- TCP数据格式：见图
- 三次握手：TCP固定字段：SYN(client)，SYN,ACK(server),ACK(client)
- 四次挥手：TCP固定字段：FIN,ACK(client)，ACK(server),FIN
,ACK(server),ACK(client)
2. 滑动窗口
- 滑动窗口：TCP是双工的，发送端有发送缓存区；接收端有接受缓存区；要发送的数据到放到发送缓存区，发送窗口就是要给发送的部分数据，即缓存中的一部分；
- 核心是流量控制：在建立建立链接时，接收端会告诉发送端自己的窗口大小，每次接收端接收数据后都会再次确认大小，如果值为0，停止发送数据；并发送端口探测包，持续监控窗口大小
- Nagle算法：任何时刻，最多只能有一个未被确认的小段；（后面的包会被打包，TCP内部控制），如果前面的包很小发送很快的话，会一直发送小包
- Cork算法：当打到MSS（Maximum Segment Size）值时统一进行发送（帧的大小1500-ip头20-tcp头20=1460个字节）
3. TCP拥塞处理
- 慢启动，拥塞避免，快重传和快恢复
- TCP维护一个拥塞窗口变量cwnd，在传输过程中没有拥塞就将窗口值增大。如果出现拥塞，超时重传就将窗口值减小
- 根据规则，使用不同传值方案
